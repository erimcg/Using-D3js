<!doctype html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Polygon</title>
  <link rel="canonical" href="http://using-d3js.com/05_09_polygons.html" />

  <link rel=stylesheet href="css/codemirror.css">
  <link rel=stylesheet href="css/ejs.css">

  <script src="js/acorn_codemirror.js"></script>
  <script src="js/sandbox.js"></script><script>var chapNum = 05;</script></head>

<article>
<nav><a href="05_08_links.html" title="previous chapter">◀</a> <a href="index.html" title="cover">◆</a> <a href="05_10_symbols.html" title="next chapter">▶</a></nav>

<h1><span class=chap_num>Chapter 05</span>Polygon</h1><script src="https://d3js.org/d3.v5.min.js"></script>
<style>
    svg { background-color: white; display: inline-block;}
    .sandbox-output { text-align: center;}
</style>


<p><a class="p_ident" id="p_cmURUrfqyy" href="#p_cmURUrfqyy" tabindex="-1" role="presentation"></a>In this section we will be discussing how to, given an array of points, compute the subset of points that form a <a href="https://en.wikipedia.org/wiki/Convex_hull#Convex_hull_of_a_finite_point_set">convex hull</a>.  For those unfamiliar with convex hulls, a convex hull can be visualized as the shape enclosed by an elastic band stretched around a set of points.</p>

<p><a class="p_ident" id="p_2WQLx6fQ+m" href="#p_2WQLx6fQ+m" tabindex="-1" role="presentation"></a>Consider the following data set:</p><pre>
var points = [
    [50, 50],
    [50, 150],
    [150, 150],
    [150, 50],
    [100, 100],
    [125, 125]
];
</pre>


<p><a class="p_ident" id="p_C5bxS/+lt1" href="#p_C5bxS/+lt1" tabindex="-1" role="presentation"></a>When we graph the six points (Figure 1), we notice that four points, creating a square, form the convex hull, and 2 points reside in the interior of the convex hull.</p>

<pre class="snippet cm-s-default" data-language="html" data-edit="editable" data-cm="hidden" ><a class="c_ident" id="c_UiPAPO/u3o" href="#c_UiPAPO/u3o" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-keyword">var</span> <span class="cm-def">points</span> <span class="cm-operator">=</span> [
  [<span class="cm-number">50</span>, <span class="cm-number">50</span>],
  [<span class="cm-number">50</span>, <span class="cm-number">150</span>],
  [<span class="cm-number">150</span>, <span class="cm-number">150</span>],
  [<span class="cm-number">150</span>, <span class="cm-number">50</span>],
  [<span class="cm-number">100</span>, <span class="cm-number">100</span>],
  [<span class="cm-number">125</span>, <span class="cm-number">125</span>]
];

<span class="cm-variable">d3</span>.<span class="cm-property">select</span>(<span class="cm-string">&quot;#demo1&quot;</span>)
  .<span class="cm-property">select</span>(<span class="cm-string">&quot;#points&quot;</span>)
  .<span class="cm-property">selectAll</span>()
  .<span class="cm-property">data</span>(<span class="cm-variable">points</span>)
  .<span class="cm-property">join</span>(<span class="cm-string">&quot;circle&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;r&quot;</span>, <span class="cm-number">5</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cx&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">0</span>])
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cy&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">1</span>]);
  
<span class="cm-variable">d3</span>.<span class="cm-property">select</span>(<span class="cm-string">&quot;#demo1&quot;</span>)
  .<span class="cm-property">select</span>(<span class="cm-string">&quot;#hull&quot;</span>)
  .<span class="cm-property">selectAll</span>(<span class="cm-string">&quot;circle&quot;</span>)
  .<span class="cm-property">data</span>(<span class="cm-variable">points</span>)
  .<span class="cm-property">join</span>(<span class="cm-string">&quot;circle&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;r&quot;</span>, <span class="cm-number">5</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cx&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">0</span>])
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cy&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">1</span>]);
  
<span class="cm-keyword">var</span> <span class="cm-def">hull</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">polygonHull</span>(<span class="cm-variable">points</span>);
  
<span class="cm-keyword">var</span> <span class="cm-def">line</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">line</span>()
  .<span class="cm-property">curve</span>(<span class="cm-variable">d3</span>.<span class="cm-property">curveLinearClosed</span>);
    
<span class="cm-variable">d3</span>.<span class="cm-property">select</span>(<span class="cm-string">&quot;#demo1&quot;</span>)
  .<span class="cm-property">select</span>(<span class="cm-string">&quot;#hull&quot;</span>)
  .<span class="cm-property">append</span>(<span class="cm-string">&quot;path&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;d&quot;</span>, <span class="cm-variable">line</span>(<span class="cm-variable">hull</span>))
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;stroke-dasharray&quot;</span>, <span class="cm-string">&quot;4&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;fill&quot;</span>, <span class="cm-string">&quot;none&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;stroke&quot;</span>, <span class="cm-string">&quot;black&quot;</span>);
<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>

<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">svg</span> <span class="cm-attribute">id</span>=<span class="cm-string">&quot;demo1&quot;</span> <span class="cm-attribute">width</span>=<span class="cm-string">400px</span> <span class="cm-attribute">height</span>=<span class="cm-string">200px</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">g</span> <span class="cm-attribute">id</span>=<span class="cm-string">&quot;points&quot;</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">g</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">g</span> <span class="cm-attribute">id</span>=<span class="cm-string">&quot;hull&quot;</span> <span class="cm-attribute">transform</span>=<span class="cm-string">&quot;translate(200,0)&quot;</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">g</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">svg</span><span class="cm-tag cm-bracket">&gt;</span></pre><figure class="sandbox"><figcaption>Figure 1. 6 points (left), outline of convex hull (right). </figcaption></figure>


<p><a class="p_ident" id="p_fTExuh4YGU" href="#p_fTExuh4YGU" tabindex="-1" role="presentation"></a>D3.js provides a function named <code>d3.polygonHull</code> which computes the minimal set of points that produce a convex hull.</p>

<ul>

<li>

<p><a class="p_ident" id="p_wxEmMWcGfn" href="#p_wxEmMWcGfn" tabindex="-1" role="presentation"></a><a href="https://github.com/d3/d3-polygon#polygonHull">d3.polygonHull(points)</a> - Takes an array of <code>points</code> and returns a subset of <code>points</code> that form the perimeter or “hull”.</p></li></ul>

<p><a class="p_ident" id="p_wJdyRl8g9Y" href="#p_wJdyRl8g9Y" tabindex="-1" role="presentation"></a>When we create a hull and print its value to the console we see that the points returned are ordered counterclockwise around the perimeter of the hull.</p><pre>
var hull = d3.polygonHull(points);
console.log(hull);
</pre>


<pre class="snippet cm-s-default" data-language="html" data-edit="editable" data-cm="hidden" ><a class="c_ident" id="c_IgNo34i0c7" href="#c_IgNo34i0c7" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-keyword">var</span> <span class="cm-def">points</span> <span class="cm-operator">=</span> [
  [<span class="cm-number">50</span>, <span class="cm-number">50</span>],
  [<span class="cm-number">50</span>, <span class="cm-number">150</span>],
  [<span class="cm-number">150</span>, <span class="cm-number">150</span>],
  [<span class="cm-number">150</span>, <span class="cm-number">50</span>],
  [<span class="cm-number">100</span>, <span class="cm-number">100</span>],
  [<span class="cm-number">125</span>, <span class="cm-number">125</span>]
];
  
<span class="cm-keyword">var</span> <span class="cm-def">hull</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">polygonHull</span>(<span class="cm-variable">points</span>);
<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">hull</span>);
<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></pre><figure class="sandbox"><figcaption>Figure 2. The hull returned by d3.polygonHull. </figcaption></figure>


<p><a class="p_ident" id="p_MHZGOe4V/E" href="#p_MHZGOe4V/E" tabindex="-1" role="presentation"></a>Now that we have the hull we can use a <code>line</code> generator to draw a polygon around the hull. The curve will be set to <code>d3.<wbr>curveLinearClosed</code> so that a line is drawn from the ending point to the starting point, closing the polygon.</p><pre>
var line = d3.line()
    .curve(d3.curveLinearClosed);
    
d3.select("#svg")
    .append("path")
    .attr("d", line(hull));
</pre>


<pre class="snippet cm-s-default" data-language="html" data-edit="editable" data-cm="hidden" ><a class="c_ident" id="c_LovkCoFSRU" href="#c_LovkCoFSRU" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-keyword">var</span> <span class="cm-def">points</span> <span class="cm-operator">=</span> [
  [<span class="cm-number">50</span>, <span class="cm-number">50</span>],
  [<span class="cm-number">50</span>, <span class="cm-number">150</span>],
  [<span class="cm-number">150</span>, <span class="cm-number">150</span>],
  [<span class="cm-number">150</span>, <span class="cm-number">50</span>],
  [<span class="cm-number">100</span>, <span class="cm-number">100</span>],
  [<span class="cm-number">125</span>, <span class="cm-number">125</span>]
];

<span class="cm-keyword">var</span> <span class="cm-def">hull</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">polygonHull</span>(<span class="cm-variable">points</span>);
  
<span class="cm-keyword">var</span> <span class="cm-def">line</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">line</span>()
  .<span class="cm-property">curve</span>(<span class="cm-variable">d3</span>.<span class="cm-property">curveLinearClosed</span>);
    
<span class="cm-variable">d3</span>.<span class="cm-property">select</span>(<span class="cm-string">&quot;#demo2&quot;</span>)
  .<span class="cm-property">select</span>(<span class="cm-string">&quot;g&quot;</span>)
  .<span class="cm-property">append</span>(<span class="cm-string">&quot;path&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;d&quot;</span>, <span class="cm-variable">line</span>(<span class="cm-variable">hull</span>))
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;fill&quot;</span>, <span class="cm-string">&quot;red&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;stroke&quot;</span>, <span class="cm-string">&quot;black&quot;</span>);
  
<span class="cm-variable">d3</span>.<span class="cm-property">select</span>(<span class="cm-string">&quot;#demo2&quot;</span>)
  .<span class="cm-property">select</span>(<span class="cm-string">&quot;g&quot;</span>)
  .<span class="cm-property">selectAll</span>(<span class="cm-string">&quot;circle&quot;</span>)
  .<span class="cm-property">data</span>(<span class="cm-variable">points</span>)
  .<span class="cm-property">join</span>(<span class="cm-string">&quot;circle&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;r&quot;</span>, <span class="cm-number">5</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cx&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">0</span>])
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cy&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">1</span>]);
<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>

<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">svg</span> <span class="cm-attribute">id</span>=<span class="cm-string">&quot;demo2&quot;</span> <span class="cm-attribute">width</span>=<span class="cm-string">400px</span> <span class="cm-attribute">height</span>=<span class="cm-string">200px</span><span class="cm-tag cm-bracket">&gt;</span>
  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">g</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">g</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">svg</span><span class="cm-tag cm-bracket">&gt;</span></pre><figure class="sandbox"><figcaption>Figure 3. A hull shaded red. </figcaption></figure>


<h2><a class="h_ident" id="h_hq1ZiAXi0O" href="#h_hq1ZiAXi0O" tabindex="-1" role="presentation"></a>Mapping an array from an object</h2>

<p><a class="p_ident" id="p_yNH0vUfnGK" href="#p_yNH0vUfnGK" tabindex="-1" role="presentation"></a>Unlike other generators, <code>d3.polygonHull</code> does not have accessor functions. As such, in order to make a new polygon we must pass in an array in the form of <code>[[x0, y0], [x1, y1], [x2, y2], .<wbr>.<wbr>.<wbr>, [xn, yn]]</code>.  Many times, however, the coordinates of the points will be contained within an array of objects.</p>

<p><a class="p_ident" id="p_qQ5ILmeJNc" href="#p_qQ5ILmeJNc" tabindex="-1" role="presentation"></a>Consider the following array of objects:</p><pre>
var data = [
    {name: "alpha", x: 0, y: 0},
    {name: "beta",  x: 5, y: 0},
    {name: "gamma", x: 0, y: 5},
    {name: "delta", x: 2.5, y: 2.5},
    {name: "epsilon",  x: 5, y: 5},
    {name: "zeta", x: 4, y: 1}
];
</pre>


<p><a class="p_ident" id="p_nOm0rC8OlG" href="#p_nOm0rC8OlG" tabindex="-1" role="presentation"></a>To get the data needed by <code>d3.polygonHull</code>, we can use a map function on our array of objects to generate a compatible array of points.  We can also use a scale inside of this map function if we need to.</p>

<p><a class="p_ident" id="p_9FsjaBIhbO" href="#p_9FsjaBIhbO" tabindex="-1" role="presentation"></a>In Figure 4 we convert <code>data</code> into an array of points that <code>d3.polygonHull</code> can use. In this conversion we also pass the <code>x</code> and <code>y</code> values into their respective scale functions to get proper SVG coordinates.</p><pre>
var xScale = d3.scaleLinear().domain([0,5]).range([25,175]);
var yScale = d3.scaleLinear().domain([0,5]).range([175,25]);

var points = data.map((d) => [xScale(d.x), yScale(d.y)]);

var hull = d3.polygonHull(points);
</pre>


<pre class="snippet cm-s-default" data-language="html" data-edit="editable" data-cm="hidden" ><a class="c_ident" id="c_1q6Sf8Ppmp" href="#c_1q6Sf8Ppmp" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-keyword">var</span> <span class="cm-def">data</span> <span class="cm-operator">=</span> [
  {<span class="cm-property">name</span>: <span class="cm-string">&quot;alpha&quot;</span>, <span class="cm-property">x</span>: <span class="cm-number">0</span>, <span class="cm-property">y</span>: <span class="cm-number">0</span>},
  {<span class="cm-property">name</span>: <span class="cm-string">&quot;beta&quot;</span>,  <span class="cm-property">x</span>: <span class="cm-number">5</span>, <span class="cm-property">y</span>: <span class="cm-number">0</span>},
  {<span class="cm-property">name</span>: <span class="cm-string">&quot;gamma&quot;</span>, <span class="cm-property">x</span>: <span class="cm-number">0</span>, <span class="cm-property">y</span>: <span class="cm-number">5</span>},
  {<span class="cm-property">name</span>: <span class="cm-string">&quot;delta&quot;</span>, <span class="cm-property">x</span>: <span class="cm-number">2.5</span>, <span class="cm-property">y</span>: <span class="cm-number">2.5</span>},
  {<span class="cm-property">name</span>: <span class="cm-string">&quot;epsilon&quot;</span>,  <span class="cm-property">x</span>: <span class="cm-number">5</span>, <span class="cm-property">y</span>: <span class="cm-number">5</span>},
  {<span class="cm-property">name</span>: <span class="cm-string">&quot;zeta&quot;</span>, <span class="cm-property">x</span>: <span class="cm-number">4</span>, <span class="cm-property">y</span>: <span class="cm-number">1</span>}
];
<span class="cm-keyword">var</span> <span class="cm-def">xScale</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">scaleLinear</span>().<span class="cm-property">domain</span>([<span class="cm-number">0</span>,<span class="cm-number">5</span>]).<span class="cm-property">range</span>([<span class="cm-number">25</span>,<span class="cm-number">175</span>]);
<span class="cm-keyword">var</span> <span class="cm-def">yScale</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">scaleLinear</span>().<span class="cm-property">domain</span>([<span class="cm-number">0</span>,<span class="cm-number">5</span>]).<span class="cm-property">range</span>([<span class="cm-number">175</span>,<span class="cm-number">25</span>]);

<span class="cm-keyword">var</span> <span class="cm-def">points</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span>.<span class="cm-property">map</span>((<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> [<span class="cm-variable">xScale</span>(<span class="cm-variable-2">d</span>.<span class="cm-property">x</span>), <span class="cm-variable">yScale</span>(<span class="cm-variable-2">d</span>.<span class="cm-property">y</span>)] );

<span class="cm-keyword">var</span> <span class="cm-def">hull</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">polygonHull</span>(<span class="cm-variable">points</span>);
<span class="cm-keyword">var</span> <span class="cm-def">line</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">line</span>()
  .<span class="cm-property">curve</span>(<span class="cm-variable">d3</span>.<span class="cm-property">curveLinearClosed</span>);

<span class="cm-keyword">var</span> <span class="cm-def">selection</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">select</span>(<span class="cm-string">&quot;#demo3&quot;</span>);

<span class="cm-variable">selection</span>.<span class="cm-property">append</span>(<span class="cm-string">&quot;path&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;d&quot;</span>, <span class="cm-variable">line</span>(<span class="cm-variable">hull</span>))
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;fill&quot;</span>, <span class="cm-string">&quot;red&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;stroke&quot;</span>, <span class="cm-string">&quot;black&quot;</span>);

<span class="cm-variable">selection</span>.<span class="cm-property">selectAll</span>()
  .<span class="cm-property">data</span>(<span class="cm-variable">points</span>)
  .<span class="cm-property">join</span>(<span class="cm-string">&quot;circle&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cx&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">0</span>])
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cy&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">1</span>])
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;r&quot;</span>, <span class="cm-number">5</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;fill&quot;</span>, <span class="cm-string">&quot;black&quot;</span>);
<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>

<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">svg</span> <span class="cm-attribute">id</span>=<span class="cm-string">&quot;demo3&quot;</span> <span class="cm-attribute">width</span>=<span class="cm-string">200</span> <span class="cm-attribute">height</span>=<span class="cm-string">200</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">svg</span><span class="cm-tag cm-bracket">&gt;</span></pre><figure class="sandbox"><figcaption>Figure 4. A polygon where the hull was generated from an array of objects using Array.map.</figcaption></figure>


<h2><a class="h_ident" id="h_KXgIgaj+u4" href="#h_KXgIgaj+u4" tabindex="-1" role="presentation"></a>Additional Methods</h2>

<p><a class="p_ident" id="p_e3JBOG78FW" href="#p_e3JBOG78FW" tabindex="-1" role="presentation"></a>It may be useful to know if a specific point is within a polygon.  For this case, D3.js supplies us with the <code>d3.<wbr>polygonContains</code> method.</p>

<ul>

<li>

<p><a class="p_ident" id="p_ve0EDcW3G0" href="#p_ve0EDcW3G0" tabindex="-1" role="presentation"></a><a href="https://github.com/d3/d3-polygon#polygonContains">d3.polygonContains(polygon, point)</a> - Takes a polygon hull array and a point and returns true if the point is inside the polygon, false otherwise.</p></li></ul>

<p><a class="p_ident" id="p_J2RZU9ZHqQ" href="#p_J2RZU9ZHqQ" tabindex="-1" role="presentation"></a>In Figure 5, we draw two circles and use <code>d3.<wbr>polygonContains</code> to determine if the circles are inside of the polygon.</p>

<pre class="snippet cm-s-default" data-language="html" data-edit="editable" data-cm="hidden" ><a class="c_ident" id="c_+v9JXjyhU8" href="#c_+v9JXjyhU8" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-keyword">var</span> <span class="cm-def">points</span> <span class="cm-operator">=</span> [
  [<span class="cm-number">50</span>, <span class="cm-number">50</span>],
  [<span class="cm-number">50</span>, <span class="cm-number">150</span>],
  [<span class="cm-number">150</span>, <span class="cm-number">150</span>],
  [<span class="cm-number">150</span>, <span class="cm-number">50</span>],
  [<span class="cm-number">100</span>, <span class="cm-number">100</span>],
  [<span class="cm-number">125</span>, <span class="cm-number">125</span>]
];
<span class="cm-keyword">var</span> <span class="cm-def">hull</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">polygonHull</span>(<span class="cm-variable">points</span>);
<span class="cm-keyword">var</span> <span class="cm-def">selection</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">select</span>(<span class="cm-string">&quot;#demo4&quot;</span>);

<span class="cm-keyword">var</span> <span class="cm-def">line</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">line</span>()
  .<span class="cm-property">x</span>(<span class="cm-def">d</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">0</span>])
  .<span class="cm-property">y</span>(<span class="cm-def">d</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">1</span>])
  .<span class="cm-property">curve</span>(<span class="cm-variable">d3</span>.<span class="cm-property">curveLinearClosed</span>);

<span class="cm-variable">selection</span>.<span class="cm-property">append</span>(<span class="cm-string">&quot;path&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;d&quot;</span>, <span class="cm-variable">line</span>(<span class="cm-variable">hull</span>))
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;stroke&quot;</span>, <span class="cm-string">&quot;black&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;fill&quot;</span>, <span class="cm-string">&quot;red&quot;</span>);
    
<span class="cm-variable">selection</span>.<span class="cm-property">selectAll</span>()
  .<span class="cm-property">data</span>(<span class="cm-variable">points</span>)
  .<span class="cm-property">join</span>(<span class="cm-string">&quot;circle&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cx&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">0</span>])
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cy&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">1</span>])
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;r&quot;</span>, <span class="cm-number">5</span>);
    
<span class="cm-keyword">var</span> <span class="cm-def">point1</span> <span class="cm-operator">=</span> [<span class="cm-number">80</span>,<span class="cm-number">70</span>];
<span class="cm-keyword">var</span> <span class="cm-def">point2</span> <span class="cm-operator">=</span> [<span class="cm-number">30</span>, <span class="cm-number">120</span>];
<span class="cm-variable">containPoints</span> <span class="cm-operator">=</span> [<span class="cm-variable">point1</span>, <span class="cm-variable">point2</span>];

<span class="cm-variable">selection</span>.<span class="cm-property">selectAll</span>()
  .<span class="cm-property">data</span>(<span class="cm-variable">containPoints</span>)
  .<span class="cm-property">join</span>(<span class="cm-string">&quot;circle&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;fill&quot;</span>, <span class="cm-string">&quot;lightgreen&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;r&quot;</span>, <span class="cm-number">5</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cx&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">0</span>])
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cy&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">1</span>]);
    
<span class="cm-variable">selection</span>.<span class="cm-property">selectAll</span>()
  .<span class="cm-property">data</span>(<span class="cm-variable">containPoints</span>)
  .<span class="cm-property">join</span>(<span class="cm-string">&quot;text&quot;</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;x&quot;</span>, <span class="cm-number">210</span>)
  .<span class="cm-property">attr</span>(<span class="cm-string">&quot;y&quot;</span>, (<span class="cm-def">d</span>, <span class="cm-def">i</span>) <span class="cm-operator">=&gt;</span> <span class="cm-number">25</span> <span class="cm-operator">+</span> <span class="cm-number">25</span><span class="cm-operator">*</span><span class="cm-variable-2">i</span>)
  .<span class="cm-property">text</span>((<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-string">&quot;Contains [&quot;</span> <span class="cm-operator">+</span> <span class="cm-variable-2">d</span>[<span class="cm-number">0</span>] <span class="cm-operator">+</span> <span class="cm-string">&quot; , &quot;</span> <span class="cm-operator">+</span> <span class="cm-variable-2">d</span>[<span class="cm-number">1</span>] <span class="cm-operator">+</span> <span class="cm-string">&quot;]: &quot;</span> <span class="cm-operator">+</span> <span class="cm-variable">d3</span>.<span class="cm-property">polygonContains</span>(<span class="cm-variable">hull</span>,<span class="cm-variable-2">d</span>));
<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>

<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">svg</span> <span class="cm-attribute">id</span>=<span class="cm-string">&quot;demo4&quot;</span> <span class="cm-attribute">width</span>=<span class="cm-string">400</span> <span class="cm-attribute">height</span>=<span class="cm-string">200</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">svg</span><span class="cm-tag cm-bracket">&gt;</span></pre><figure class="sandbox"><figcaption>Figure 5. On point contained within the polygon and one point outside of the polygon. </figcaption></figure>


<p><a class="p_ident" id="p_ApiWJ79FMq" href="#p_ApiWJ79FMq" tabindex="-1" role="presentation"></a>D3.js also methods to obtain statistics on polygons.</p>

<ul>

<li>

<p><a class="p_ident" id="p_m8zVD703YG" href="#p_m8zVD703YG" tabindex="-1" role="presentation"></a><a href="https://github.com/d3/d3-polygon#polygonArea">d3.polygonArea(polygon)</a> - Takes an array of points forming a polygon and returns back the array of the polygon.</p></li>

<li>

<p><a class="p_ident" id="p_+jwt4CgvB8" href="#p_+jwt4CgvB8" tabindex="-1" role="presentation"></a><a href="https://github.com/d3/d3-polygon#polygonLength">d3.polygonLength(polygon)</a> - Takes an array of points forming a polygon and returns the perimeter of the polygon.</p></li>

<li>

<p><a class="p_ident" id="p_l++tMIo69v" href="#p_l++tMIo69v" tabindex="-1" role="presentation"></a><a href="https://github.com/d3/d3-polygon#polygonCentroid">d3.polygonCentroid(polygon) </a> - Takes an array of points forming a polygon and returns back the coordinates of the polygon’s centroid in an array.  The centroid is an ideal spot for a label.</p></li></ul>

<p><a class="p_ident" id="p_9Zz6VsvHm9" href="#p_9Zz6VsvHm9" tabindex="-1" role="presentation"></a>In Figure 6, we display the area and length of the polygon. We also draw a blue circle at the centroid of the polygon and display its coordinates.</p>

<pre class="snippet cm-s-default" data-language="html" data-edit="editable" data-cm="hidden" ><a class="c_ident" id="c_M2wLr3cII+" href="#c_M2wLr3cII+" tabindex="-1" role="presentation"></a><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>
<span class="cm-keyword">var</span> <span class="cm-def">points</span> <span class="cm-operator">=</span> [
    [<span class="cm-number">50</span>, <span class="cm-number">50</span>],
    [<span class="cm-number">50</span>, <span class="cm-number">150</span>],
    [<span class="cm-number">150</span>, <span class="cm-number">150</span>],
    [<span class="cm-number">150</span>, <span class="cm-number">50</span>],
    [<span class="cm-number">100</span>, <span class="cm-number">100</span>],
    [<span class="cm-number">125</span>, <span class="cm-number">125</span>]
];
<span class="cm-keyword">var</span> <span class="cm-def">hull</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">polygonHull</span>(<span class="cm-variable">points</span>);
<span class="cm-keyword">var</span> <span class="cm-def">selection</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">select</span>(<span class="cm-string">&quot;#demo5&quot;</span>);

<span class="cm-keyword">var</span> <span class="cm-def">line</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">line</span>()
    .<span class="cm-property">x</span>(<span class="cm-def">d</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">0</span>])
    .<span class="cm-property">y</span>(<span class="cm-def">d</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">1</span>])
    .<span class="cm-property">curve</span>(<span class="cm-variable">d3</span>.<span class="cm-property">curveLinearClosed</span>);

<span class="cm-variable">selection</span>.<span class="cm-property">append</span>(<span class="cm-string">&quot;path&quot;</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;d&quot;</span>, <span class="cm-variable">line</span>(<span class="cm-variable">hull</span>))
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;stroke&quot;</span>, <span class="cm-string">&quot;black&quot;</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;fill&quot;</span>, <span class="cm-string">&quot;red&quot;</span>);
    
<span class="cm-variable">selection</span>.<span class="cm-property">selectAll</span>()
    .<span class="cm-property">data</span>(<span class="cm-variable">points</span>)
    .<span class="cm-property">join</span>(<span class="cm-string">&quot;circle&quot;</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cx&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">0</span>])
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cy&quot;</span>, (<span class="cm-def">d</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">d</span>[<span class="cm-number">1</span>])
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;r&quot;</span>, <span class="cm-number">5</span>);

<span class="cm-variable">selection</span>.<span class="cm-property">append</span>(<span class="cm-string">&quot;text&quot;</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;x&quot;</span>, <span class="cm-number">210</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;y&quot;</span>, <span class="cm-number">25</span>)
    .<span class="cm-property">text</span>(<span class="cm-string">&quot;Area: &quot;</span> <span class="cm-operator">+</span> <span class="cm-variable">d3</span>.<span class="cm-property">polygonArea</span>(<span class="cm-variable">hull</span>) <span class="cm-operator">+</span> <span class="cm-string">&quot; sq pixels&quot;</span>);
    
<span class="cm-variable">selection</span>.<span class="cm-property">append</span>(<span class="cm-string">&quot;text&quot;</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;x&quot;</span>, <span class="cm-number">210</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;y&quot;</span>, <span class="cm-number">50</span>)
    .<span class="cm-property">text</span>(<span class="cm-string">&quot;Length: &quot;</span> <span class="cm-operator">+</span> <span class="cm-variable">Math</span>.<span class="cm-property">round</span>(<span class="cm-variable">d3</span>.<span class="cm-property">polygonLength</span>(<span class="cm-variable">hull</span>)));
    
<span class="cm-keyword">var</span> <span class="cm-def">centroid</span> <span class="cm-operator">=</span> <span class="cm-variable">d3</span>.<span class="cm-property">polygonCentroid</span>(<span class="cm-variable">hull</span>);

<span class="cm-variable">selection</span>.<span class="cm-property">append</span>(<span class="cm-string">&quot;circle&quot;</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cx&quot;</span>, <span class="cm-variable">centroid</span>[<span class="cm-number">0</span>])
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;cy&quot;</span>, <span class="cm-variable">centroid</span>[<span class="cm-number">1</span>])
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;r&quot;</span>, <span class="cm-number">5</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;fill&quot;</span>, <span class="cm-string">&quot;blue&quot;</span>);
    
<span class="cm-variable">selection</span>.<span class="cm-property">append</span>(<span class="cm-string">&quot;text&quot;</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;x&quot;</span>, <span class="cm-number">210</span>)
    .<span class="cm-property">attr</span>(<span class="cm-string">&quot;y&quot;</span>, <span class="cm-number">75</span>)
    .<span class="cm-property">text</span>(<span class="cm-string">&quot;Centroid: [&quot;</span> <span class="cm-operator">+</span> <span class="cm-variable">Math</span>.<span class="cm-property">round</span>(<span class="cm-variable">centroid</span>[<span class="cm-number">0</span>]) <span class="cm-operator">+</span> <span class="cm-string">&quot; , &quot;</span> <span class="cm-operator">+</span> <span class="cm-variable">Math</span>.<span class="cm-property">round</span>(<span class="cm-variable">centroid</span>[<span class="cm-number">1</span>]) <span class="cm-operator">+</span> <span class="cm-string">&quot;]&quot;</span>);

<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span>

<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">svg</span> <span class="cm-attribute">id</span>=<span class="cm-string">&quot;demo5&quot;</span> <span class="cm-attribute">width</span> = <span class="cm-string">400</span> <span class="cm-attribute">height</span>=<span class="cm-string">200</span><span class="cm-tag cm-bracket">&gt;</span><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">svg</span><span class="cm-tag cm-bracket">&gt;</span></pre><figure class="sandbox"><figcaption>Figure 6. A polygon with a blue circle at the centroid and statistics about the polygon.</figcaption></figure>
<nav><a href="05_08_links.html" title="previous chapter">◀</a> <a href="index.html" title="cover">◆</a> <a href="05_10_symbols.html" title="next chapter">▶</a></nav>
</article>
<script src="js/ejs.js"></script>
